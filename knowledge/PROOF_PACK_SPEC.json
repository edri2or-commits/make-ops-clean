{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "API Read Operation Proof Pack",
  "description": "Schema for documenting API read operations with proof",
  "type": "object",
  "required": [
    "api",
    "endpoint",
    "method",
    "request_id",
    "status_code",
    "observed_at",
    "response_hash",
    "state_identifier"
  ],
  "properties": {
    "api": {
      "type": "string",
      "enum": ["drive", "gmail", "sheets", "github", "make", "telegram"],
      "description": "Which API was accessed"
    },
    "endpoint": {
      "type": "string",
      "description": "Full endpoint path"
    },
    "method": {
      "type": "string",
      "enum": ["GET", "POST", "PUT", "PATCH", "DELETE"],
      "description": "HTTP method used"
    },
    "request_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique request identifier"
    },
    "request_headers": {
      "type": "object",
      "description": "Request headers (sanitized)"
    },
    "query_params": {
      "type": "object",
      "description": "Query parameters used"
    },
    "selected_fields": {
      "type": "string",
      "description": "Fields selected in API call"
    },
    "status_code": {
      "type": "integer",
      "description": "HTTP status code"
    },
    "observed_at": {
      "type": "string",
      "format": "date-time",
      "description": "When this was observed (ISO 8601)"
    },
    "response_size_bytes": {
      "type": "integer",
      "description": "Size of response payload"
    },
    "response_hash": {
      "type": "string",
      "description": "Hash of response for verification"
    },
    "state_identifier": {
      "type": "object",
      "properties": {
        "etag": {"type": ["string", "null"]},
        "revisionId": {"type": ["string", "null"]},
        "historyId": {"type": ["string", "null"]}
      },
      "description": "State identifiers from API (etag, etc)"
    },
    "sampling_note": {
      "type": ["string", "null"],
      "description": "Note if this is a sample of larger dataset"
    }
  }
}
