name: Rube Secret Guardian

on:
  schedule:
    - cron: '7,37 * * * *'
  workflow_dispatch:

jobs:
  secret_guard:
    runs-on: ubuntu-latest
    steps:
      - name: Verify Required Secrets
        run: |
          REQUIRED=("RUBE_PRIVATE_KEY" "RUBE_GH_PAT")
          MISSING=()
          for S in "${REQUIRED[@]}"; do
            if [ -z "${{ secrets[$S] }}" ]; then
              echo "‚ùå Missing secret: $S"
              MISSING+=("$S")
            fi
          done
          if [ ${#MISSING[@]} -eq 0 ]; then
            echo "‚úÖ All secrets present"
          else
            echo "üö® Missing secrets detected: ${MISSING[*]}"
            exit 1
          fi
